(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{3106:()=>{},28154:(e,r,s)=>{"use strict";s.d(r,{AuthProvider:()=>t});var i=s(54568),n=s(89223);let t=e=>{let{children:r}=e;return(0,i.jsx)(n.SessionProvider,{children:r})}},38993:(e,r,s)=>{"use strict";let i;s.d(r,{TRPCReactProvider:()=>x,F:()=>p});var n=s(54568),t=s(7620),o=s(53979),l=s(90438),d=s(31354),a=s(68512),h=s(69415),u=s(43244),v=s(66688),m=s(45447),c=s(87606);s(24338);let b=()=>window.location.origin,P=()=>e=>{let{next:r,op:s}=e;return(0,u.sH)(e=>{let i=r(s).subscribe({next:r=>((0,m.uW)(s.type,s.path,s.input,r.result.data),e.next(r)),complete:()=>e.complete(),error:r=>{var s;o.iUO.error((null===(s=r.data)||void 0===s?void 0:s.formattedError)||r.message||"操作失败"),e.error(r)}});return()=>i.unsubscribe()})},p=(0,h.pY)(),f=null!=i?i:i=new d.E({defaultOptions:{queries:{staleTime:3e4},dehydrate:{serializeData:l.Ay.serialize,shouldDehydrateQuery:e=>(0,a.XS)(e)||"pending"===e.state.status},hydrate:{deserializeData:l.Ay.deserialize}}}),x=e=>{let[r]=(0,t.useState)(()=>p.createClient({links:[P,(0,v.kM)({transformer:l.Ay,url:b()+"/api/trpc",headers:()=>{let e=new Headers;return e.set("x-trpc-source","nextjs-react"),e}})]}));return(0,n.jsx)(c.QueryClientProvider,{client:f,children:(0,n.jsx)(p.Provider,{client:r,queryClient:f,children:e.children})})}},70071:(e,r,s)=>{"use strict";s.d(r,{LayoutWithAuth:()=>d});var i=s(54568),n=s(62942),t=s(29565),o=s(7811),l=s(89223);let d=e=>{var r;let{children:s}=e,{status:d,data:a}=(0,l.useSession)(),h=(0,n.useRouter)(),u=(0,n.usePathname)();if(["/auth/signin","/auth/unauthorized","/auth/error","/auth/new-user"].some(e=>u.startsWith(e)))return(0,i.jsx)("div",{className:"min-h-screen",children:s});let v=o.W.find(e=>u.startsWith(e.path));if(null==v?void 0:null===(r=v.allowedRoles)||void 0===r?void 0:r.length){if("loading"===d)return(0,i.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,i.jsx)(t.A,{size:"large",tip:"正在加载..."})});if("unauthenticated"===d){h.push("/auth/signin?callbackUrl=".concat(encodeURIComponent(u)));return}if("authenticated"===d&&!v.allowedRoles.includes(a.user.role)){h.push("/auth/unauthorized?callbackUrl=".concat(encodeURIComponent(u)));return}}return(0,i.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,i.jsx)(o.p,{}),(0,i.jsx)("main",{className:"flex-1 overflow-auto",children:s})]})}},73297:(e,r,s)=>{"use strict";s.d(r,{ConfigProvider:()=>i.Ay});var i=s(82644)},94639:(e,r,s)=>{Promise.resolve().then(s.bind(s,73297)),Promise.resolve().then(s.bind(s,64607)),Promise.resolve().then(s.bind(s,15765)),Promise.resolve().then(s.bind(s,3515)),Promise.resolve().then(s.bind(s,55790)),Promise.resolve().then(s.bind(s,76135)),Promise.resolve().then(s.bind(s,65136)),Promise.resolve().then(s.bind(s,73431)),Promise.resolve().then(s.bind(s,87812)),Promise.resolve().then(s.bind(s,35143)),Promise.resolve().then(s.bind(s,13416)),Promise.resolve().then(s.bind(s,38993)),Promise.resolve().then(s.bind(s,28154)),Promise.resolve().then(s.bind(s,70071)),Promise.resolve().then(s.t.bind(s,3106,23)),Promise.resolve().then(s.bind(s,7933)),Promise.resolve().then(s.bind(s,47673)),Promise.resolve().then(s.bind(s,57225)),Promise.resolve().then(s.bind(s,426)),Promise.resolve().then(s.bind(s,95333)),Promise.resolve().then(s.bind(s,71600)),Promise.resolve().then(s.bind(s,39307)),Promise.resolve().then(s.bind(s,97599)),Promise.resolve().then(s.bind(s,16069)),Promise.resolve().then(s.bind(s,73285)),Promise.resolve().then(s.bind(s,67806)),Promise.resolve().then(s.bind(s,84332)),Promise.resolve().then(s.bind(s,75130)),Promise.resolve().then(s.bind(s,6232)),Promise.resolve().then(s.bind(s,85265)),Promise.resolve().then(s.bind(s,48317)),Promise.resolve().then(s.bind(s,11340))}},e=>{var r=r=>e(e.s=r);e.O(0,[6854,3967,6410,541,6771,2602,1598,1815,8259,1210,2998,6502,5888,4030,794,9223,4033,9565,2983,3651,1026,959,5229,5924,5533,587,8315,7358],()=>r(94639)),_N_E=e.O()}]);