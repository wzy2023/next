(()=>{var e={};e.id=167,e.ids=[167],e.modules={1580:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{e:()=>u});var n=r(13486),a=r(35412),i=r(21543),o=e([a,i]);[a,i]=o.then?(await o)():o;let u=e=>{let{id:t,onSuccess:r}=e,{removeState:s}=(0,i.Vp)({list:!1,remove:{onSuccess:r}});return(0,n.jsx)(a.iS5,{title:"确定要删除吗？",okText:"确定",cancelText:"取消",onConfirm:()=>s.mutate(t),children:(0,n.jsx)("span",{children:"删除"})})};s()}catch(e){s(e)}})},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7273:e=>{"use strict";e.exports=require("prettier/parser-typescript")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34589:e=>{"use strict";e.exports=require("node:assert")},35599:(e,t,r)=>{Promise.resolve().then(r.bind(r,43677))},43677:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>y});var n=r(13486),a=r(60159),i=r(2984),o=r(35412),u=r(48269),d=r(17121),l=r(74481),c=r(15568),p=e([o,u,l]);[o,u,l]=p.then?(await p)():p;let y=({params:e})=>{let{rest:[t]=[]}=e,r=(0,i.useRouter)(),[s,p]=(0,a.useState)([]),y=(0,a.useMemo)(()=>s.map(e=>d._.pick(e,["i","w","h","x","y","data"])),[s]),h=l.F.commonGroupLayout.create.useMutation(),b=l.F.commonGroupLayout.update.useMutation(),g=l.F.commonGroupLayout.findUnique.useQuery({where:{id:t}},{enabled:!!t});(0,c.useAsyncEffect)(async()=>{if(!g.isLoading){if(!t){let e=await h.mutateAsync({data:{data:y}});e&&r.push(`/buttons/${e.id}`);return}!d._.isEqual(y,g.data?.data?.map(e=>d._.pick(e,["i","w","h","x","y","data"])))&&await b.mutateAsync({where:{id:t},data:{data:y}})}},[JSON.stringify(y)]);let m=(e,t)=>{p(s.map(r=>r.i!==e?r:{...r,data:{...r.data,title:t}}))};return(0,n.jsxs)("div",{className:"p-6 w-full h-[100vh] flex flex-col",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-3",children:"按钮大盘"}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(o.$nd,{type:"primary",onClick:()=>{p([...s,{i:Date.now().toString(),w:4,h:2,x:0,y:0,data:{title:"aaa"}}])},children:"添加分组"})}),(0,n.jsx)("div",{className:"flex-1 mt-2",children:(0,n.jsx)(o.UC8,{layout:s,onChange:p,renderItem:e=>(0,n.jsx)(u.A,{item:e,onChangeName:m})})})]})};s()}catch(e){s(e)}})},48269:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{A:()=>a.A});var n=r(94741),a=r(54444),i=e([n,a]);[n,a]=i.then?(await i)():i,s()}catch(e){s(e)}})},49725:(e,t,r)=>{"use strict";r.d(t,{GX:()=>a,dw:()=>i,Rx:()=>n,dF:()=>o,xW:()=>u});var s=r(92064);let n={[s.HabitProgressStatus.Disabled]:"已禁用",[s.HabitProgressStatus.Enabled]:"已启用",[s.HabitProgressStatus.Pending]:"待开始",[s.HabitProgressStatus.Doing]:"进行中",[s.HabitProgressStatus.Done]:"已完成",[s.HabitProgressStatus.Failed]:"已失败"},a={[s.HabitFrequencyType.DAILY]:"每日",[s.HabitFrequencyType.WEEKLY]:"每周",[s.HabitFrequencyType.MONTHLY]:"每月"},i={[s.HabitFrequencyType.DAILY]:"日",[s.HabitFrequencyType.WEEKLY]:"周",[s.HabitFrequencyType.MONTHLY]:"月"},o={[s.HabitProgressStatus.Enabled]:{bg:"bg-blue-500 hover:bg-blue-600",ring:""},[s.HabitProgressStatus.Disabled]:{bg:"bg-gray-400 hover:bg-gray-500",ring:""},[s.HabitProgressStatus.Pending]:{bg:"bg-gray-300 hover:bg-gray-400",ring:""},[s.HabitProgressStatus.Done]:{bg:"bg-green-500 hover:bg-green-600",ring:""},[s.HabitProgressStatus.Doing]:{bg:"bg-yellow-500 hover:bg-yellow-600",ring:"text-yellow-300"},[s.HabitProgressStatus.Failed]:{bg:"text-red-300 hover:bg-red-600",ring:"bg-red-500"}},u=[{label:"复制粘贴",value:s.ButtonsType.Copy},{label:"执行命令",value:s.ButtonsType.Command}]},51455:e=>{"use strict";e.exports=require("node:fs/promises")},54444:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{A:()=>d});var n=r(13486);r(60159);var a=r(35412),i=r(94741),o=r(15568),u=e([a,i]);[a,i]=u.then?(await u)():u;let d=e=>{let{item:t,onChangeName:r}=e,{isHovered:s,hoverProps:u}=(0,o.useHovered)();return(0,n.jsx)(a.ZpM,{...u,size:"small",style:{width:"100%",height:"100%"},bodyStyle:{height:"80%"},title:(0,n.jsx)(a.ksK,{value:t.data.title,onChange:e=>r(t.i,e)}),extra:s&&(0,n.jsx)(a.duJ,{className:"drag-handle cursor-grab"}),children:(0,n.jsx)(i.F,{item:t})})};s()}catch(e){s(e)}})},57975:e=>{"use strict";e.exports=require("node:util")},62087:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/wangzhenyu/Code/work/persons/app/src/app/buttons/[[...rest]]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/wangzhenyu/Code/work/persons/app/src/app/buttons/[[...rest]]/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},76760:e=>{"use strict";e.exports=require("node:path")},76830:e=>{"use strict";e.exports=require("prettier/parser-babel")},78877:e=>{"use strict";e.exports=require("node:v8")},82455:(e,t,r)=>{Promise.resolve().then(r.bind(r,62087))},83505:e=>{"use strict";e.exports=import("prettier/standalone")},85712:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>l,routeModule:()=>p,tree:()=>d});var s=r(24332),n=r(48819),a=r(67851),i=r.n(a),o=r(97540),u={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>o[e]);r.d(t,u);let d={children:["",{children:["buttons",{children:["[[...rest]]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,62087)),"/Users/wangzhenyu/Code/work/persons/app/src/app/buttons/[[...rest]]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85631)),"/Users/wangzhenyu/Code/work/persons/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/Users/wangzhenyu/Code/work/persons/app/src/app/buttons/[[...rest]]/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/buttons/[[...rest]]/page",pathname:"/buttons/[[...rest]]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},88629:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{X:()=>c});var n=r(13486),a=r(35412),i=r(49725),o=r(15568),u=r(21543),d=r(92064),l=e([a,u]);[a,u]=l.then?(await l)():l;let c=e=>{let{id:t,initialValues:r={},groupId:s,onSuccess:l}=e,{form:c,formProps:p}=(0,o.useForm)(),[y,{setFalse:h,setTrue:b}]=(0,o.useBoolean)(),{createState:g,updateState:m}=(0,u.Vp)({list:!1,create:{onSuccess:()=>{h(),l?.()}},update:{onSuccess:()=>{h(),l?.()}}}),x=async()=>{await c.validateFields();let e=c.getFieldsValue();if(t){m.mutate(t,e);return}g.mutate({groupId:s,sort:99,...e})};return(0,n.jsxs)(n.Fragment,{children:[t?(0,n.jsx)("span",{onClick:b,children:"修改"}):(0,n.jsx)(a.VL1,{rectWidth:50,rectHeight:32,sectors:[{id:d.ButtonsType.Copy},{id:d.ButtonsType.Command}],onClick:async e=>{if(s){if(e===d.ButtonsType.Command)b(),c.setFieldsValue({type:e});else{let e=await navigator.clipboard.readText();if(!e)return;g.mutate({groupId:s,sort:99,type:d.ButtonsType.Copy,content:e})}}}}),(0,n.jsx)(a.aFV,{title:t?`修改按钮`:"新建按钮",open:y,onOk:x,onCancel:h,children:(0,n.jsx)(a.kyL,{form:c,submitter:!1,layout:"horizontal",labelCol:{span:4},initialValues:r,onValuesChange:p.onValuesChange,columns:[{title:"类型",dataIndex:"type",valueType:"radio",fieldProps:{optionType:"button",buttonStyle:"solid",options:i.xW},formItemProps:{rules:[{required:!0}]}},{title:"标题",dataIndex:"title"},{title:"内容",dataIndex:"content",valueType:"textarea",fieldProps:{rows:5},formItemProps:{rules:[{required:!0}]}}]})})]})};s()}catch(e){s(e)}})},89116:e=>{"use strict";e.exports=require("vscode-oniguruma")},92064:(e,t,r)=>{"use strict";r.d(t,{ButtonsType:()=>i,CollectingType:()=>o,HabitFrequencyType:()=>s,HabitProgressStatus:()=>n,HabitStatusMode:()=>a,RssFeedActionType:()=>u.lQ,RssFetchTriggerType:()=>u.ln,RssFrequency:()=>u.b4,RssItemActionType:()=>u._1});var s=function(e){return e.DAILY="DAILY",e.WEEKLY="WEEKLY",e.MONTHLY="MONTHLY",e}({}),n=function(e){return e.Disabled="disabled",e.Enabled="enabled",e.Pending="pending",e.Doing="doing",e.Done="done",e.Failed="failed",e}({}),a=function(e){return e.Habit="habit",e.Record="record",e}({});r(95985);var i=function(e){return e.Command="command",e.Copy="copy",e}({}),o=function(e){return e.Url="url",e.Prompt="prompt",e.Copy="copywriter",e}({}),u=r(96602)},94741:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{F:()=>b});var n=r(13486),a=r(35412),i=r(88629),o=r(1580),u=r(21543),d=r(17121),l=r(15568),c=r(74481),p=r(92064),y=r(52033),h=e([a,i,o,u,c]);[a,i,o,u,c]=h.then?(await h)():h;let b=e=>{let{item:t}=e,{isHovered:r,hoverProps:s}=(0,l.useHovered)(),h=c.F.useUtils(),{listState:b}=(0,u.Vp)({list:{query:{orderBy:{sort:"desc"},where:{groupId:t?.i}},option:{enabled:!!t?.i}}}),g=c.F.custom.buttonsItem.updateSort.useMutation({onSuccess:()=>b?.refetch()}),m=e=>[{key:"edit",label:(0,n.jsx)(i.X,{id:e.id,initialValues:e,onSuccess:b.refetch})},{key:"delete",danger:!0,label:(0,n.jsx)(o.e,{id:e.id,onSuccess:b.refetch})}],x=e=>{e?.type===p.ButtonsType.Copy&&((0,d.C)(e.content),y.Ay.success("复制成功"))};return(0,n.jsx)(a.tKH,{spinning:b.isLoading,children:(0,n.jsx)("div",{...s,className:"h-full",children:(0,n.jsx)(a.BbE,{list:b.data,direction:"horizontal",dropType:"button",onDragEnd:e=>{if(e.destination&&"button"===e.type){let r=Array.from(b.data||[]),[s]=r.splice(e.source.index,1);s&&r.splice(e.destination.index,0,s),h.buttonItem.findMany.setData({orderBy:{sort:"asc"},where:{groupId:t?.i}},r),g.mutate(r.map((e,t)=>({id:e.id,sort:t})))}},lastChildren:t?.i&&(0,n.jsx)("div",{className:`transition-opacity duration-300 ${r?"opacity-100":"opacity-0"}`,children:(0,n.jsx)(i.X,{groupId:t?.i,onSuccess:b.refetch})}),children:(e,t)=>(0,n.jsx)("div",{children:(0,n.jsx)(a.msM,{getPopupContainer:e=>e,trigger:["contextMenu"],menu:{items:m(e)},children:(0,n.jsx)("div",{...t.dragHandleProps,children:(0,n.jsx)(a.$nd,{onClick:()=>x(e),children:e?.title||e.content})})})},e.id)})})})};s()}catch(e){s(e)}})},95985:()=>{},96602:(e,t,r)=>{"use strict";r.d(t,{_1:()=>a,b4:()=>s,lQ:()=>i,ln:()=>n});var s=function(e){return e.Minutes5="minutes5",e.Minutes10="minutes10",e.Minutes20="minutes20",e.Minutes30="minutes30",e.Hourly="hourly",e.Daily="daily",e.Weekly="weekly",e}({}),n=function(e){return e.Manual="manual",e.Scheduled="scheduled",e}({}),a=function(e){return e.MarkAsRead="markAsRead",e.MarkAsUnread="markAsUnread",e.Star="star",e.Unstar="unstar",e.OpenLink="openLink",e}({}),i=function(e){return e.Edit="edit",e.Delete="delete",e.Enable="enable",e.Disable="disable",e.Fetch="fetch",e}({})},98995:e=>{"use strict";e.exports=require("node:module")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[734,661,206,571,543],()=>r(85712));module.exports=s})();