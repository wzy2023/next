(()=>{var e={};e.id=811,e.ids=[811],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},2051:(e,t,r)=>{"use strict";r.d(t,{vt:()=>c});var s=r(13050),n=r(60159),a=r(81816);let{useDebugValue:i}=n,{useSyncExternalStoreWithSelector:l}=a,o=!1,u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?(0,s.y)(e):e,r=(e,r)=>(function(e,t=u,r){r&&!o&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),o=!0);let s=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return i(s),s})(t,e,r);return Object.assign(r,t),r},c=e=>e?d(e):d},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7273:e=>{"use strict";e.exports=require("prettier/parser-typescript")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13050:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});let s=e=>{let t;let r=new Set,s=(e,s)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=s?s:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,a={setState:s,getState:n,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},i=t=e(s,n,a);return a},n=e=>e?s(e):s},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19829:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{G_:()=>n.G,f9:()=>i.f});var n=r(58028),a=r(87834),i=r(48923),l=e([n,a,i]);[n,a,i]=l.then?(await l)():l,s()}catch(e){s(e)}})},26661:(e,t,r)=>{Promise.resolve().then(r.bind(r,55991))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30434:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>u});var s=r(24332),n=r(48819),a=r(67851),i=r.n(a),l=r(97540),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let u={children:["",{children:["info",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,97633)),"/Users/wangzhenyu/Code/work/persons/app/src/app/info/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85631)),"/Users/wangzhenyu/Code/work/persons/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/wangzhenyu/Code/work/persons/app/src/app/info/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/info/page",pathname:"/info",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},32429:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});let s=(0,r(2051).vt)(e=>({filterValues:{enabled:void 0,title:"",tag:""},setFilterValues:t=>{e(e=>({filterValues:{...e.filterValues,...t}}))}}))},33873:e=>{"use strict";e.exports=require("path")},34589:e=>{"use strict";e.exports=require("node:assert")},48923:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{f:()=>d});var n=r(13486);r(60159);var a=r(35412),i=r(58028),l=r(87834),o=r(21543),u=e([a,i,l,o]);[a,i,l,o]=u.then?(await u)():u;let d=e=>{let{list:t,onSuccess:r}=e,{updateState:s}=(0,o.sk)({list:!1,update:{onSuccess:r}}),u=(e,t)=>{s.mutate(t.id,{enabled:e})},d=e=>{navigator.clipboard.writeText(e),a.iUO.success("内容已复制")};return(0,n.jsx)(a.fI1,{gutter:[16,16],children:(t||[]).map(e=>(0,n.jsx)(a.fvL,{xs:24,md:12,lg:6,children:(0,n.jsxs)(a.ZpM,{size:"small",title:(0,n.jsxs)(a.$xS,{style:{width:"100%"},children:[(0,n.jsx)(a.vwO,{color:e.enabled?"success":"error",children:e.enabled?"启用":"禁用"}),(0,n.jsx)("div",{children:e.title})]}),extra:(0,n.jsx)(a.dOG,{size:"small",checked:e.enabled,onChange:t=>u(t,e)}),actions:[(0,n.jsx)(a.$nd,{type:"text",title:"复制内容",icon:(0,n.jsx)(a.wq3,{}),onClick:()=>d(e.content||"")},"copy"),(0,n.jsx)(i.G,{item:e,onSuccess:r},"edit"),(0,n.jsx)(l.e,{id:e.id,onSuccess:r},"delete")],children:[(0,n.jsx)("div",{className:"mb-3",children:e.tags?.map(e=>n.jsx(a.vwO,{className:"mr-1 mb-1",children:e},e))}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(a.o5u.Paragraph,{ellipsis:{rows:5},children:e.content})})]})},e.id))})};s()}catch(e){s(e)}})},51455:e=>{"use strict";e.exports=require("node:fs/promises")},55991:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>p});var n=r(13486),a=r(60159),i=r(35412),l=r(19829),o=r(97132),u=r(32429),d=r(21543),c=e([i,l,d]);[i,l,d]=c.then?(await c)():c;let p=()=>{let{filterValues:e,setFilterValues:t}=(0,u.x)(),r=(0,a.useMemo)(()=>{let t={};return void 0!==e.enabled&&(t.enabled=e.enabled),e.title&&(t.title={contains:e.title}),e.tag&&(t.tags={equals:[e.tag]}),t},[e]),{listState:s}=(0,d.sk)({list:{query:{where:r,orderBy:{createdAt:"desc"}}}}),c=(0,a.useMemo)(()=>{if(!s.data)return[];let e=new Set;return s.data.forEach(t=>{t.tags&&Array.isArray(t.tags)&&t.tags.forEach(t=>e.add(t))}),Array.from(e).map(e=>({label:e,value:e}))},[s.data]);return(0,n.jsxs)("div",{className:"p-5 mx-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-medium text-gray-900",children:"信息管理"}),(0,n.jsx)(l.G_,{onSuccess:s.refetch})]}),(0,n.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-4 w-full",children:[(0,n.jsx)(i.aaP,{value:e.enabled,options:o.c,style:{width:300},onChange:e=>t({enabled:e})}),(0,n.jsx)(i.l6P,{placeholder:"根据标签筛选",allowClear:!0,style:{width:300},value:e.tag,options:c,onChange:e=>t({tag:e})}),(0,n.jsx)(i.pde,{placeholder:"搜索标题",allowClear:!0,value:e.title,onChange:e=>t({title:e.target.value}),onPressEnter:()=>s.refetch()})]})}),(0,n.jsx)(i.tKH,{spinning:s.isLoading,delay:100,children:(0,n.jsx)(l.f9,{list:s.data,onSuccess:s.refetch})})]})};s()}catch(e){s(e)}})},57975:e=>{"use strict";e.exports=require("node:util")},58028:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{G:()=>d});var n=r(13486),a=r(60159),i=r(35412),l=r(15568),o=r(21543),u=e([i,o]);[i,o]=u.then?(await u)():u;let d=e=>{let{item:t,onSuccess:r}=e,[s]=i.lVW.useForm(),[u,{setTrue:d,setFalse:c}]=(0,l.useBoolean)(!1),{createState:p,updateState:x}=(0,o.sk)({list:!1,create:{onSuccess:()=>{r?.(),s.setFieldsValue({title:"",content:""})}},update:{onSuccess:()=>{f(),r?.()}}});(0,a.useEffect)(()=>{t&&u?s.setFieldsValue({title:t.title,content:t.content,enabled:t.enabled,tags:t.tags}):s.resetFields()},[s,t,u]);let f=()=>{c(),s.resetFields()},h=async()=>{await s.validateFields();let e=s.getFieldsValue();t?x.mutate(t.id,e):p.mutate(e)};return(0,n.jsxs)(n.Fragment,{children:[t?(0,n.jsx)(i.$nd,{type:"text",icon:(0,n.jsx)(i.xjh,{}),onClick:d}):(0,n.jsx)(i.$nd,{type:"primary",icon:(0,n.jsx)(i.bW0,{}),onClick:d,children:"添加信息"}),(0,n.jsx)(i._s,{title:t?"编辑信息":"新建信息",open:u,onClose:f,width:"80%",extra:(0,n.jsx)(i.$nd,{type:"primary",onClick:h,loading:p.isPending||x.isPending,children:"保存"}),children:(0,n.jsx)(i.kyL,{form:s,submitter:!1,layout:"horizontal",labelCol:{span:1},columns:[{title:"状态",dataIndex:"enabled",valueType:"switch",initialValue:!0},{title:"标题",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"请输入标题"}]}},{title:"标签",dataIndex:"tags",valueType:"select",fieldProps:{mode:"tags",placeholder:"输入标签后按回车"}},{title:"内容",dataIndex:"content",valueType:"textarea",fieldProps:{rows:30},formItemProps:{rules:[{required:!0,message:"请输入内容"}]}}]})})]})};s()}catch(e){s(e)}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64904:(e,t,r)=>{"use strict";var s=r(60159),n=r(52826),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useSyncExternalStore,l=s.useRef,o=s.useEffect,u=s.useMemo,d=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,s,n){var c=l(null);if(null===c.current){var p={hasValue:!1,value:null};c.current=p}else p=c.current;var x=i(e,(c=u(function(){function e(e){if(!o){if(o=!0,i=e,e=s(e),void 0!==n&&p.hasValue){var t=p.value;if(n(t,e))return l=t}return l=e}if(t=l,a(i,e))return t;var r=s(e);return void 0!==n&&n(t,r)?(i=e,t):(i=e,l=r)}var i,l,o=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,s,n]))[0],c[1]);return o(function(){p.hasValue=!0,p.value=x},[x]),d(x),x}},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73861:(e,t,r)=>{Promise.resolve().then(r.bind(r,97633))},76760:e=>{"use strict";e.exports=require("node:path")},76830:e=>{"use strict";e.exports=require("prettier/parser-babel")},78877:e=>{"use strict";e.exports=require("node:v8")},81816:(e,t,r)=>{"use strict";e.exports=r(64904)},83505:e=>{"use strict";e.exports=import("prettier/standalone")},87834:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{e:()=>o});var n=r(13486);r(60159);var a=r(35412),i=r(21543),l=e([a,i]);[a,i]=l.then?(await l)():l;let o=e=>{let{id:t,onSuccess:r}=e,{removeState:s}=(0,i.sk)({list:!1,remove:{onSuccess:r}});return(0,n.jsx)(a.iS5,{title:"确定删除该信息吗？",onConfirm:()=>{s.mutate(t)},okText:"确定",cancelText:"取消",children:(0,n.jsx)(a.$nd,{type:"link",danger:!0,icon:(0,n.jsx)(a.SUY,{})})})};s()}catch(e){s(e)}})},89116:e=>{"use strict";e.exports=require("vscode-oniguruma")},97132:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});let s=[{label:"全部",value:void 0},{label:"启用",value:!0},{label:"禁用",value:!1}]},97633:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/wangzhenyu/Code/work/persons/app/src/app/info/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/wangzhenyu/Code/work/persons/app/src/app/info/page.tsx","default")},98995:e=>{"use strict";e.exports=require("node:module")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[734,661,206,571,543],()=>r(30434));module.exports=s})();