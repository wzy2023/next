(()=>{var e={};e.id=781,e.ids=[781],e.modules={527:(e,t,r)=>{Promise.resolve().then(r.bind(r,11447))},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7273:e=>{"use strict";e.exports=require("prettier/parser-typescript")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11447:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/wangzhenyu/Code/work/persons/app/src/app/collecting/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/wangzhenyu/Code/work/persons/app/src/app/collecting/page.tsx","default")},11760:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{o:()=>u});var n=r(13486);r(60159);var a=r(35412),i=r(56516),l=r(33635),o=r(16358),d=r(78689),c=e([a,l,o,d]);[a,l,o,d]=c.then?(await c)():c;let u=({type:e})=>{let{collectingItems:t,loading:r,refetch:s}=(0,d.k)(e),{tags:c,selectedTags:u,filteredItems:p,onChangeTag:m}=(0,d.d)(t);return(0,n.jsx)(a.tKH,{spinning:r,children:(0,n.jsxs)("div",{className:"w-full flex flex-col h-[83vh]",children:[(0,n.jsx)("div",{style:{position:"absolute",right:0,top:-62},children:(0,n.jsx)(o.G,{type:e,onSuccess:s})}),(0,n.jsx)(i.e,{tags:c,value:u,onChange:m}),(0,n.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,n.jsx)(l.L,{items:p,onRefresh:s})})]})})};s()}catch(e){s(e)}})},16358:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{G:()=>u});var n=r(13486),a=r(60159),i=r(35412),l=r(17121),o=r(92064),d=r(21543),c=e([i,d]);[i,d]=c.then?(await c)():c;let u=e=>{let{item:t,type:r=t.type,onSuccess:s}=e,[c]=i.lVW.useForm(),[u,p]=(0,a.useState)(!1),{createState:m,updateState:x}=(0,d.wm)({list:!1}),y=!!t,h=y?t.type:r,g=async()=>{let e=await c.validateFields();y?await x.mutateAsync(t.id,e):await m.mutateAsync(e),p(!1),c.resetFields(),s()},v=[{title:"类型",dataIndex:"type",valueType:"select",valueEnum:{[o.CollectingType.Url]:{text:"网址"},[o.CollectingType.Prompt]:{text:"提示词"},[o.CollectingType.Copy]:{text:"文案"}},fieldProps:{disabled:!!h},formItemProps:{rules:[{required:!0,message:"请选择类型"}]}},{title:"标题",dataIndex:"title",valueType:"text",formItemProps:{rules:[{required:!0,message:"请输入标题"}]}},{title:"描述",dataIndex:"description",valueType:"textarea",fieldProps:{rows:2}},{title:"内容",dataIndex:"content",valueType:"textarea",fieldProps:{rows:4},formItemProps:{rules:[{required:!0,message:"请输入内容"}]}},{title:"标签",dataIndex:"tags",valueType:"select",fieldProps:{mode:"tags",placeholder:"输入标签后按回车"},formItemProps:{rules:[{required:!0,message:"请添加至少一个标签"}]}},...r!==o.CollectingType.Prompt?[]:[{title:"示例",dataIndex:"images",renderFormItem:()=>(0,n.jsx)(i.tuV,{})}]];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.$nd,{type:y?"text":"primary",icon:y?(0,n.jsx)(i.xjh,{}):(0,n.jsx)(i.bW0,{}),onClick:()=>{y?c.setFieldsValue(l._.omit(t,["id"])):c.setFieldsValue({type:h}),p(!0)}}),(0,n.jsx)(i.aFV,{title:y?"编辑资料":"添加资料",open:u,onCancel:()=>{p(!1),c.resetFields()},onOk:g,children:(0,n.jsx)(i.kyL,{layoutType:"Form",form:c,columns:v,submitter:!1,layout:"horizontal",labelCol:{span:4},initialValues:{type:h}})})]})};s()}catch(e){s(e)}})},18850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(24332),n=r(48819),a=r(67851),i=r.n(a),l=r(97540),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d={children:["",{children:["collecting",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,11447)),"/Users/wangzhenyu/Code/work/persons/app/src/app/collecting/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85631)),"/Users/wangzhenyu/Code/work/persons/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/wangzhenyu/Code/work/persons/app/src/app/collecting/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/collecting/page",pathname:"/collecting",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24628:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{k:()=>l});var n=r(60159),a=r(74481),i=e([a]);a=(i.then?(await i)():i)[0];let l=e=>{let{data:t=[],isLoading:r,refetch:s}=a.F.collecting.findMany.useQuery({where:{type:e}});return{collectingItems:(0,n.useMemo)(()=>t.map(e=>({...e,tags:Array.isArray(e.tags)?e.tags:[]})),[t]),loading:r,refetch:s}};s()}catch(e){s(e)}})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31156:(e,t,r)=>{Promise.resolve().then(r.bind(r,98677))},33635:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{L:()=>d});var n=r(13486);r(60159);var a=r(35412),i=r(16358),l=r(90940),o=e([a,i,l]);[a,i,l]=o.then?(await o)():o;let d=e=>{let{items:t,onRefresh:r}=e;return 0===t.length?(0,n.jsx)(a.SvL,{description:"暂无数据"}):(0,n.jsx)(a.fI1,{gutter:10,children:t.map(e=>(0,n.jsx)(a.fvL,{xs:24,sm:12,md:8,lg:6,children:(0,n.jsxs)(a.ZpM,{title:e.title,size:"small",styles:{body:{padding:0}},extra:(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsx)(i.G,{item:e,onSuccess:r}),(0,n.jsx)(l.e,{id:e.id,onSuccess:r})]}),actions:[(0,n.jsx)("div",{children:e.tags.map(e=>(0,n.jsx)(a.vwO,{children:e},e))},"tags")],children:[(0,n.jsx)("div",{style:{height:200,overflow:"hidden"},children:(0,n.jsx)(a.FNf,{arrows:!0,children:e.images?.map((e,t)=>n.jsx(a._V3,{alt:"",preview:!1,src:e,style:{objectFit:"cover"}},t))})}),(0,n.jsxs)("div",{className:"p-1",children:[e.description&&(0,n.jsx)(a.o5u.Paragraph,{type:"secondary",ellipsis:{rows:2},style:{marginBottom:8},children:e.description}),(0,n.jsx)(a.o5u.Paragraph,{ellipsis:{rows:3},style:{marginBottom:8},children:e.content})]})]})},e.id))})};s()}catch(e){s(e)}})},33873:e=>{"use strict";e.exports=require("path")},34589:e=>{"use strict";e.exports=require("node:assert")},39732:(e,t,r)=>{"use strict";r.d(t,{d:()=>l});var s=r(60159),n=r(17121);let a=e=>{let t=n._.flatten(e.map(e=>e.tags));return n._.uniq(t)},i=(e,t)=>t.length?e.filter(e=>t.every(t=>e.tags.includes(t))):e,l=e=>{let[t,r]=(0,s.useState)([]),n=(0,s.useMemo)(()=>a(e),[e]),l=(0,s.useMemo)(()=>i(e,t),[e,t]);return{tags:n,selectedTags:t,filteredItems:l,onChangeTag:e=>{r(e)}}}},51455:e=>{"use strict";e.exports=require("node:fs/promises")},56516:(e,t,r)=>{"use strict";r.d(t,{e:()=>l});var s=r(13486);r(60159);var n=r(68246),a=r(66656),i=r(28627);let l=({tags:e,value:t,onChange:r})=>0===e.length?null:(0,s.jsx)(n.A,{size:"small",style:{marginBottom:16},children:(0,s.jsx)(a.A.Group,{value:t,onChange:r,children:(0,s.jsx)(i.A,{wrap:!0,children:e.map(e=>(0,s.jsx)(a.A,{value:e,children:e},e))})})})},56991:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});var s=r(92064);let n=[{key:s.CollectingType.Url,label:"网址"},{key:s.CollectingType.Prompt,label:"提示词"},{key:s.CollectingType.Copy,label:"文案"}]},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66347:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{o:()=>n.o});var n=r(11760),a=e([n]);n=(a.then?(await a)():a)[0],s()}catch(e){s(e)}})},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},76760:e=>{"use strict";e.exports=require("node:path")},76830:e=>{"use strict";e.exports=require("prettier/parser-babel")},78689:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{d:()=>a.d,k:()=>n.k});var n=r(24628),a=r(39732),i=e([n]);n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},78877:e=>{"use strict";e.exports=require("node:v8")},83505:e=>{"use strict";e.exports=import("prettier/standalone")},89116:e=>{"use strict";e.exports=require("vscode-oniguruma")},90940:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{e:()=>o});var n=r(13486);r(60159);var a=r(35412),i=r(21543),l=e([a,i]);[a,i]=l.then?(await l)():l;let o=e=>{let{id:t,onSuccess:r}=e,{removeState:s}=(0,i.wm)({list:!1,remove:{onSuccess:r}});return(0,n.jsx)(a.$nd,{type:"text",danger:!0,icon:(0,n.jsx)(a.SUY,{}),onClick:()=>s.mutate(t)})};s()}catch(e){s(e)}})},92064:(e,t,r)=>{"use strict";r.d(t,{ButtonsType:()=>i,CollectingType:()=>l,HabitFrequencyType:()=>s,HabitProgressStatus:()=>n,HabitStatusMode:()=>a,RssFeedActionType:()=>o.lQ,RssFetchTriggerType:()=>o.ln,RssFrequency:()=>o.b4,RssItemActionType:()=>o._1});var s=function(e){return e.DAILY="DAILY",e.WEEKLY="WEEKLY",e.MONTHLY="MONTHLY",e}({}),n=function(e){return e.Disabled="disabled",e.Enabled="enabled",e.Pending="pending",e.Doing="doing",e.Done="done",e.Failed="failed",e}({}),a=function(e){return e.Habit="habit",e.Record="record",e}({});r(95985);var i=function(e){return e.Command="command",e.Copy="copy",e}({}),l=function(e){return e.Url="url",e.Prompt="prompt",e.Copy="copywriter",e}({}),o=r(96602)},95985:()=>{},96602:(e,t,r)=>{"use strict";r.d(t,{_1:()=>a,b4:()=>s,lQ:()=>i,ln:()=>n});var s=function(e){return e.Minutes5="minutes5",e.Minutes10="minutes10",e.Minutes20="minutes20",e.Minutes30="minutes30",e.Hourly="hourly",e.Daily="daily",e.Weekly="weekly",e}({}),n=function(e){return e.Manual="manual",e.Scheduled="scheduled",e}({}),a=function(e){return e.MarkAsRead="markAsRead",e.MarkAsUnread="markAsUnread",e.Star="star",e.Unstar="unstar",e.OpenLink="openLink",e}({}),i=function(e){return e.Edit="edit",e.Delete="delete",e.Enable="enable",e.Disable="disable",e.Fetch="fetch",e}({})},98677:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>u});var n=r(13486),a=r(60159),i=r(35412),l=r(66347),o=r(56991),d=r(92064),c=e([i,l]);[i,l]=c.then?(await c)():c;let u=()=>{let[e,t]=(0,a.useState)(d.CollectingType.Url);return(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-3",children:"资料收集"}),(0,n.jsx)(i.tUM,{activeKey:e,onChange:e=>{t(e)},items:o.v.map(e=>({key:e.key,label:e.label,children:(0,n.jsx)(l.o,{type:e.key})}))})]})};s()}catch(e){s(e)}})},98995:e=>{"use strict";e.exports=require("node:module")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[734,661,206,571,543],()=>r(18850));module.exports=s})();